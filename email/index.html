
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.google.com/email/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>Email - Mailie Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Mailie Documentation" class="md-header__button md-logo" aria-label="Mailie Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mailie Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Email
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Mailie Documentation" class="md-nav__button md-logo" aria-label="Mailie Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Mailie Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Email
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Email
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email" class="md-nav__link">
    mailie._email.Email
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.__delitem__" class="md-nav__link">
    __delitem__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.__getitem__" class="md-nav__link">
    __getitem__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.attach" class="md-nav__link">
    attach()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.clear" class="md-nav__link">
    clear()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.clear_content" class="md-nav__link">
    clear_content()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.get" class="md-nav__link">
    get()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.get_all" class="md-nav__link">
    get_all()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.is_multipart" class="md-nav__link">
    is_multipart()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.items" class="md-nav__link">
    items()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.keys" class="md-nav__link">
    keys()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.tree_view" class="md-nav__link">
    tree_view()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.values" class="md-nav__link">
    values()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dsl/" class="md-nav__link">
        DSL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../commandline/" class="md-nav__link">
        Commandline
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email" class="md-nav__link">
    mailie._email.Email
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.__delitem__" class="md-nav__link">
    __delitem__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.__getitem__" class="md-nav__link">
    __getitem__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.attach" class="md-nav__link">
    attach()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.clear" class="md-nav__link">
    clear()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.clear_content" class="md-nav__link">
    clear_content()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.get" class="md-nav__link">
    get()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.get_all" class="md-nav__link">
    get_all()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.is_multipart" class="md-nav__link">
    is_multipart()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.items" class="md-nav__link">
    items()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.keys" class="md-nav__link">
    keys()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.tree_view" class="md-nav__link">
    tree_view()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailie._email.Email.values" class="md-nav__link">
    values()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="reference">Reference</h1>


  <div class="doc doc-object doc-class">

<a id="mailie._email.Email"></a>
    <div class="doc doc-contents first">

      <p>An encapsulation and representation of an email message.  At present only simple plaintext
mails and multipart/alternative plain + html content mails are supported.  Client code should
opt for using the email_factory rather than importing and instantiating <code>Email</code> instances
themselves.  Only keyword arguments are supported in both <code>Email</code> and <code>email_factory</code> in a bid
to build a more robust API.</p>
<p>An email message is a combination of RFC-2822 headers and a payload.  If the message is a container
(e.g a multipart message) then the payload is a list of EmailMessage objects, otherwise it is just
a string.</p>
<pre><code>:param from_addr: (Required) The envelope sender of the email.  This is what is provided during the SMTP
communication as part of the `MAIL FROM` part of the conversation later.  Mailie will not assign a
FROM header in the message itself, but consider this the envelope/unix from.

:param to_addrs: (Required) The envelope recipient(s) of the email.  This is what is provided during the SMTP
communication as part of the `RCPT TO` part of the conversation later.  to_addrs can be a single email address
(str) or a list of email addresses.  In the event a single address is given, it will be converted to a list
implicitly.

:param policy: (Optional) An instance of `email.policy.Policy` used for governing disparate use cases. By
default mailie will assume a `SMTP` policy that automatically handles /r/n.  In a nutshell; policies are used
to customise the behaviour of various classes in pythons inbuilt email package.

For more information see: https://docs.python.org/3/library/email.policy.html.  Below outlines some of
the inbuilt policies available via python email:

    :: default (uses python line endings via /n - sometimes undesirable)
    :: SMTP (clone of default, with /r/n line endings for RFC compliance)
    :: SMTPUTF8 (a UTF-8 equivalent of `smtp`, useful for non-ASCII in sender/recipient data)
    :: HTTP (useful if serialising headers for HTTP traffic)
    :: strict (clone of default, except raise_on_defect is assigned `True` to prevent silent failures)

If omitted by client code, mailie will assume a `SMTP` strict equivalent by default.  If this is undesirable
pass your own policy, e.g email.policy.SMTP. For core policies; mailie supports passing a string to resolve
the policy e.g `policy='SMTPUTF8'`.

:param cc: (Optional) A single email address (string) or an iterable of email addresses. In both cases the
emails are converted to a list of distinct addresses.  Recipients set for cc (carbon copy) are all visible
to each other; in order to include a hidden recipient, opt for `bcc=...` instead.  CC recipients are
handled via a `CC` header and are also added to to_addrs and bcc during the SMTP conversation.

Including arbitrary headers for CC is not advised as this is handled internally by the Email instance.

:param bcc: (Optional) A single email address (string) or an iterable of email addresses. In both cases
the emails are converted to a list of distinct addresses.  In older versions of python email handling
via a BCC header revealed recipients, but is however fixed using send_message(...).  However mailie will
not include a `BCC` header in the email regardless and all to_addrs; cc + bcc addresses will be compressed
into a single iterable when having the SMTP conversation.

Including arbitrary headers for BCC is not advised as this is handled internally by the Email instance.

:param subject: (Optional) A string to include in the message as part of the subject header.
By design emails do not REQUIRE a subject however it is good practice to include one.  If omitted
the subject of the email will be empty ''.

:param text: (Optional) A string of text to include as the text/plain payload (body) of the email.
By default, an empty body will be created.  For simple plaintext mails, text= is the only data
necessary, however for more multipart variants html &amp; attachments  can be provided.

:param html: (Optional) A tuple of either length 1 or 2.  If the tuple is a single element
then the value is considered the HTML content in it's unformatted, raw form.  An optional
iterable of attachment paths can be provided; these will be have CID's generated implicitly
and be formatted into the html content provided in the order in which they are provided.
For that reason, a tuple is preferred; using a set cannot guarantee the CID for img src
tags in the html template post-format processing.

A string of html content to include in the payload (body) of the email.
By default, html is omitted and a simple plain text mail is built, if provided the mail is
converted to a multipart/alternative where the payload includes both plain text and HTML content.
Depending on the recipient(s) client, displaying of this will vary however mailie will signal
that the HTML is priority (by the order in which the data is transmitted).

:param charset: (Optional) ...

:param base_headers: (Optional) A list of strings which are RFC-5322 or RFC-6532 compliant, where the
header field and the header value are separated by colon.

:param attachments: (Optional) attachments path can support attaching files from the local
file system to the email.  It can accept a single path (string or PathLike) or an iterable of
paths (string or PathLike).  Additionally it can accept the path to a directory in which case
all files located in that directory will be considered for attachments.  These attachments are
NOT inline attachments; to provide inline attachments for the alternative body; pass a 2 length
tuple to html=(..., ...).

:param attachment_strategy: A class which implements the `mailie.Attachable` interface.  This class
can be provided by the user at runtime in order implement a customised attachment lookup and attachment
process.  If omitted mailie will use a basic file strategy that takes paths literally and creates
`FileAttachment` objects out of them, if a directory is provided all files in that directory will be
turned into `FileAttachments` and added to the email (NOT inline).  The default strategy does not
recursive into sub directories to hunt for more files; implement your own strategy if that is what
you desire.

What kind of emails are typically sent and currently supported?
    :: Simple plaintext emails
    :: Simple alternative plaintext/html emails
    :: Html emails embedded/inline attachments
    :: Emails with normal attachments

`Email` implements a the `Mapping` interface (partially) and is mostly concerned around `header`
management in that regard.  Indexing of `Email` is based on it's headers.
</code></pre>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Email</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An encapsulation and representation of an email message.  At present only simple plaintext</span>
<span class="sd">    mails and multipart/alternative plain + html content mails are supported.  Client code should</span>
<span class="sd">    opt for using the email_factory rather than importing and instantiating `Email` instances</span>
<span class="sd">    themselves.  Only keyword arguments are supported in both `Email` and `email_factory` in a bid</span>
<span class="sd">    to build a more robust API.</span>

<span class="sd">    An email message is a combination of RFC-2822 headers and a payload.  If the message is a container</span>
<span class="sd">    (e.g a multipart message) then the payload is a list of EmailMessage objects, otherwise it is just</span>
<span class="sd">    a string.</span>

<span class="sd">        :param from_addr: (Required) The envelope sender of the email.  This is what is provided during the SMTP</span>
<span class="sd">        communication as part of the `MAIL FROM` part of the conversation later.  Mailie will not assign a</span>
<span class="sd">        FROM header in the message itself, but consider this the envelope/unix from.</span>

<span class="sd">        :param to_addrs: (Required) The envelope recipient(s) of the email.  This is what is provided during the SMTP</span>
<span class="sd">        communication as part of the `RCPT TO` part of the conversation later.  to_addrs can be a single email address</span>
<span class="sd">        (str) or a list of email addresses.  In the event a single address is given, it will be converted to a list</span>
<span class="sd">        implicitly.</span>

<span class="sd">        :param policy: (Optional) An instance of `email.policy.Policy` used for governing disparate use cases. By</span>
<span class="sd">        default mailie will assume a `SMTP` policy that automatically handles /r/n.  In a nutshell; policies are used</span>
<span class="sd">        to customise the behaviour of various classes in pythons inbuilt email package.</span>

<span class="sd">        For more information see: https://docs.python.org/3/library/email.policy.html.  Below outlines some of</span>
<span class="sd">        the inbuilt policies available via python email:</span>

<span class="sd">            :: default (uses python line endings via /n - sometimes undesirable)</span>
<span class="sd">            :: SMTP (clone of default, with /r/n line endings for RFC compliance)</span>
<span class="sd">            :: SMTPUTF8 (a UTF-8 equivalent of `smtp`, useful for non-ASCII in sender/recipient data)</span>
<span class="sd">            :: HTTP (useful if serialising headers for HTTP traffic)</span>
<span class="sd">            :: strict (clone of default, except raise_on_defect is assigned `True` to prevent silent failures)</span>

<span class="sd">        If omitted by client code, mailie will assume a `SMTP` strict equivalent by default.  If this is undesirable</span>
<span class="sd">        pass your own policy, e.g email.policy.SMTP. For core policies; mailie supports passing a string to resolve</span>
<span class="sd">        the policy e.g `policy=&#39;SMTPUTF8&#39;`.</span>

<span class="sd">        :param cc: (Optional) A single email address (string) or an iterable of email addresses. In both cases the</span>
<span class="sd">        emails are converted to a list of distinct addresses.  Recipients set for cc (carbon copy) are all visible</span>
<span class="sd">        to each other; in order to include a hidden recipient, opt for `bcc=...` instead.  CC recipients are</span>
<span class="sd">        handled via a `CC` header and are also added to to_addrs and bcc during the SMTP conversation.</span>

<span class="sd">        Including arbitrary headers for CC is not advised as this is handled internally by the Email instance.</span>

<span class="sd">        :param bcc: (Optional) A single email address (string) or an iterable of email addresses. In both cases</span>
<span class="sd">        the emails are converted to a list of distinct addresses.  In older versions of python email handling</span>
<span class="sd">        via a BCC header revealed recipients, but is however fixed using send_message(...).  However mailie will</span>
<span class="sd">        not include a `BCC` header in the email regardless and all to_addrs; cc + bcc addresses will be compressed</span>
<span class="sd">        into a single iterable when having the SMTP conversation.</span>

<span class="sd">        Including arbitrary headers for BCC is not advised as this is handled internally by the Email instance.</span>

<span class="sd">        :param subject: (Optional) A string to include in the message as part of the subject header.</span>
<span class="sd">        By design emails do not REQUIRE a subject however it is good practice to include one.  If omitted</span>
<span class="sd">        the subject of the email will be empty &#39;&#39;.</span>

<span class="sd">        :param text: (Optional) A string of text to include as the text/plain payload (body) of the email.</span>
<span class="sd">        By default, an empty body will be created.  For simple plaintext mails, text= is the only data</span>
<span class="sd">        necessary, however for more multipart variants html &amp; attachments  can be provided.</span>

<span class="sd">        :param html: (Optional) A tuple of either length 1 or 2.  If the tuple is a single element</span>
<span class="sd">        then the value is considered the HTML content in it&#39;s unformatted, raw form.  An optional</span>
<span class="sd">        iterable of attachment paths can be provided; these will be have CID&#39;s generated implicitly</span>
<span class="sd">        and be formatted into the html content provided in the order in which they are provided.</span>
<span class="sd">        For that reason, a tuple is preferred; using a set cannot guarantee the CID for img src</span>
<span class="sd">        tags in the html template post-format processing.</span>

<span class="sd">        A string of html content to include in the payload (body) of the email.</span>
<span class="sd">        By default, html is omitted and a simple plain text mail is built, if provided the mail is</span>
<span class="sd">        converted to a multipart/alternative where the payload includes both plain text and HTML content.</span>
<span class="sd">        Depending on the recipient(s) client, displaying of this will vary however mailie will signal</span>
<span class="sd">        that the HTML is priority (by the order in which the data is transmitted).</span>

<span class="sd">        :param charset: (Optional) ...</span>

<span class="sd">        :param base_headers: (Optional) A list of strings which are RFC-5322 or RFC-6532 compliant, where the</span>
<span class="sd">        header field and the header value are separated by colon.</span>

<span class="sd">        :param attachments: (Optional) attachments path can support attaching files from the local</span>
<span class="sd">        file system to the email.  It can accept a single path (string or PathLike) or an iterable of</span>
<span class="sd">        paths (string or PathLike).  Additionally it can accept the path to a directory in which case</span>
<span class="sd">        all files located in that directory will be considered for attachments.  These attachments are</span>
<span class="sd">        NOT inline attachments; to provide inline attachments for the alternative body; pass a 2 length</span>
<span class="sd">        tuple to html=(..., ...).</span>

<span class="sd">        :param attachment_strategy: A class which implements the `mailie.Attachable` interface.  This class</span>
<span class="sd">        can be provided by the user at runtime in order implement a customised attachment lookup and attachment</span>
<span class="sd">        process.  If omitted mailie will use a basic file strategy that takes paths literally and creates</span>
<span class="sd">        `FileAttachment` objects out of them, if a directory is provided all files in that directory will be</span>
<span class="sd">        turned into `FileAttachments` and added to the email (NOT inline).  The default strategy does not</span>
<span class="sd">        recursive into sub directories to hunt for more files; implement your own strategy if that is what</span>
<span class="sd">        you desire.</span>

<span class="sd">        What kind of emails are typically sent and currently supported?</span>
<span class="sd">            :: Simple plaintext emails</span>
<span class="sd">            :: Simple alternative plaintext/html emails</span>
<span class="sd">            :: Html emails embedded/inline attachments</span>
<span class="sd">            :: Emails with normal attachments</span>

<span class="sd">        `Email` implements a the `Mapping` interface (partially) and is mostly concerned around `header`</span>
<span class="sd">        management in that regard.  Indexing of `Email` is based on it&#39;s headers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">from_addr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">to_addrs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">policy</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Policy</span><span class="p">]</span> <span class="o">=</span> <span class="n">SMTP_DEFAULT_POLICY</span><span class="p">,</span>
        <span class="n">cc</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bcc</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">html</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">charset</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">UTF_8</span><span class="p">,</span>
        <span class="n">base_headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attachments</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">EMAIL_ATTACHMENT_PATH_ALIAS</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attachment_strategy</span><span class="p">:</span> <span class="n">Attachable</span> <span class="o">=</span> <span class="n">AllFilesStrategy</span><span class="p">(),</span>
        <span class="n">preamble</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">NON_MIME_AWARE_CLIENT_MESSAGE</span><span class="p">,</span>
        <span class="n">epilogue</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">NON_MIME_AWARE_CLIENT_MESSAGE</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span> <span class="o">=</span> <span class="n">EmailMessage</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">policy_factory</span><span class="p">(</span><span class="n">policy</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">from_addr</span> <span class="o">=</span> <span class="n">from_addr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to_addrs</span> <span class="o">=</span> <span class="n">emails_to_list</span><span class="p">(</span><span class="n">to_addrs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc</span> <span class="o">=</span> <span class="n">emails_to_list</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bcc</span> <span class="o">=</span> <span class="n">emails_to_list</span><span class="p">(</span><span class="n">bcc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="n">html</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_charset</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="n">subject</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">preamble</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epilogue</span> <span class="o">=</span> <span class="n">epilogue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attachments</span> <span class="o">=</span> <span class="n">attachment_strategy</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">attachments</span><span class="p">)</span>  <span class="c1"># type: ignore [call-arg]</span>

        <span class="c1"># -- Delegation Specifics ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">FROM_HEADER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_addr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">TO_HEADER</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_addrs</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">SUBJECT_HEADER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">split_headers_per_rfc</span><span class="p">(</span><span class="n">base_headers</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="o">*</span><span class="n">header</span><span class="p">)</span>

        <span class="c1"># Text provided; set the text/plain content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">set_content</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;plain&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="p">:</span>
            <span class="c1"># multipart/alternative.</span>
            <span class="c1"># Todo: Handle content ids and inline attachments within this.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">add_alternative</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>

        <span class="c1"># Handling normal non inline attachments</span>
        <span class="c1"># Todo: Async support required here likely.</span>
        <span class="k">for</span> <span class="n">attachment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attachments</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attachment</span><span class="p">(</span><span class="n">attachment</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">defects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">MessageDefect</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">defects</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">smtp_recipients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_addrs</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cc</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bcc</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">smtp_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">EmailMessage</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_addr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">smtp_recipients</span>

    <span class="k">def</span> <span class="nf">get_unixfrom</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get_unixfrom</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_unixfrom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unix_from</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">set_unixfrom</span><span class="p">(</span><span class="n">unix_from</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unixfrom</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">maxheaderlen</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">policy</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Policy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">as_string</span><span class="p">(</span><span class="n">unixfrom</span><span class="p">,</span> <span class="n">maxheaderlen</span><span class="p">,</span> <span class="n">policy</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">as_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unixfrom</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">policy</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Policy</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">as_bytes</span><span class="p">(</span><span class="n">unixfrom</span><span class="p">,</span> <span class="n">policy</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the given payload to the current payload.</span>

<span class="sd">        The current payload will always be a list of objects after this method</span>
<span class="sd">        is called.  If you want to set the payload to a scalar object, use</span>
<span class="sd">        set_payload() instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_payload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">decode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">EMAIL_PAYLOAD_ALIAS</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get_payload</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">decode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_payload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">EMAIL_PAYLOAD_ALIAS</span><span class="p">,</span> <span class="n">charset</span><span class="p">:</span> <span class="n">EMAIL_CHARSET_ALIAS</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">set_charset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">charset</span><span class="p">:</span> <span class="n">EMAIL_CHARSET_ALIAS</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">set_charset</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">get_charset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EMAIL_CHARSET_ALIAS</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get_charset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tree_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the structure of this message to stdout. This is handled recursively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="n">level</span><span class="si">}{</span><span class="n">message</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">is_multipart</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">sub_part</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">get_payload</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tree_view</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">sub_part</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">add_attachment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attachment</span><span class="p">:</span> <span class="n">FileAttachment</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="n">main</span><span class="p">,</span> <span class="n">sub</span> <span class="o">=</span> <span class="n">attachment</span><span class="o">.</span><span class="n">mime_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">add_attachment</span><span class="p">(</span><span class="n">attachment</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">maintype</span><span class="o">=</span><span class="n">main</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="n">sub</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">attachment</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">async_add_attachment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attachment</span><span class="p">:</span> <span class="n">FileAttachment</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="o">...</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">get_content_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">set_content</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the headers and payload from the delegated `EmailMessage` messaged.</span>
<span class="sd">        If you want to retain non Content- headers, use `clear_content()` instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">clear_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the payload and all non Content- headers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">clear_content</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">is_multipart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if the message contains multiple MIME parts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">is_multipart</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">failobj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the value of the header named `name`.  If the header is not present in the message</span>
<span class="sd">        then failobj is returned.  Invoked by `__getitem__`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="p">)</span>  <span class="c1"># type: ignore [arg-type]</span>

    <span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">failobj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">EMAIL_HEADER_TYPE_ALIAS</span><span class="p">],</span> <span class="n">_T</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of the header values where `name` is the header name.  If there is no header with</span>
<span class="sd">        that name in the message, then `failobj` is returned.  If the header exists multiple times all</span>
<span class="sd">        of it&#39;s values are retruend.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="p">)</span>  <span class="c1"># type: ignore [arg-type]</span>

    <span class="k">def</span> <span class="nf">walk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of all the messages header field names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">EMAIL_HEADER_TYPE_ALIAS</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of all the messages header values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">EMAIL_HEADER_TYPE_ALIAS</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of 2-tuples containing all the messages header field and head values respectively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>

    <span class="c1"># ----- Data model specifics ----- #</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_string</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__bytes__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_bytes</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the total number of headers in the email, including duplicate headers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">yield from</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the value for the header named `item`.  If no header is present for that key then</span>
<span class="sd">        `None` is returned.  A `KeyError` is never raised here.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete all instances of a header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="c1"># Work around until delegation is fully in place.</span>
        <span class="n">attribute</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">attribute</span><span class="p">):</span>

            <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">attribute</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">wrapper</span>
        <span class="k">return</span> <span class="n">attribute</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.__delitem__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents ">

      <p>Delete all instances of a header.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete all instances of a header.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.__getitem__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents ">

      <p>Return the value for the header named <code>item</code>.  If no header is present for that key then
<code>None</code> is returned.  A <code>KeyError</code> is never raised here.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the value for the header named `item`.  If no header is present for that key then</span>
<span class="sd">    `None` is returned.  A `KeyError` is never raised here.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.__len__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents ">

      <p>Return the total number of headers in the email, including duplicate headers.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the total number of headers in the email, including duplicate headers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>










  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.attach" class="doc doc-heading">
<code class="highlight language-python"><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Add the given payload to the current payload.</p>
<p>The current payload will always be a list of objects after this method
is called.  If you want to set the payload to a scalar object, use
set_payload() instead.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add the given payload to the current payload.</span>

<span class="sd">    The current payload will always be a list of objects after this method</span>
<span class="sd">    is called.  If you want to set the payload to a scalar object, use</span>
<span class="sd">    set_payload() instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.clear" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Clears the headers and payload from the delegated <code>EmailMessage</code> messaged.
If you want to retain non Content- headers, use <code>clear_content()</code> instead.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears the headers and payload from the delegated `EmailMessage` messaged.</span>
<span class="sd">    If you want to retain non Content- headers, use `clear_content()` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.clear_content" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Clears the payload and all non Content- headers.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clear_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Email</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears the payload and all non Content- headers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">clear_content</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Return the value of the header named <code>name</code>.  If the header is not present in the message
then failobj is returned.  Invoked by <code>__getitem__</code></p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">failobj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the value of the header named `name`.  If the header is not present in the message</span>
<span class="sd">    then failobj is returned.  Invoked by `__getitem__`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="p">)</span>  <span class="c1"># type: ignore [arg-type]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.get_all" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Return a list of the header values where <code>name</code> is the header name.  If there is no header with
that name in the message, then <code>failobj</code> is returned.  If the header exists multiple times all
of it's values are retruend.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">failobj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">_T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">EMAIL_HEADER_TYPE_ALIAS</span><span class="p">],</span> <span class="n">_T</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of the header values where `name` is the header name.  If there is no header with</span>
<span class="sd">    that name in the message, then `failobj` is returned.  If the header exists multiple times all</span>
<span class="sd">    of it&#39;s values are retruend.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="p">)</span>  <span class="c1"># type: ignore [arg-type]</span>
</code></pre></div>
        </details>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.is_multipart" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_multipart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Return True if the message contains multiple MIME parts.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_multipart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return True if the message contains multiple MIME parts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">is_multipart</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.items" class="doc doc-heading">
<code class="highlight language-python"><span class="n">items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Return a list of 2-tuples containing all the messages header field and head values respectively.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">EMAIL_HEADER_TYPE_ALIAS</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of 2-tuples containing all the messages header field and head values respectively.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.keys" class="doc doc-heading">
<code class="highlight language-python"><span class="n">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Return a list of all the messages header field names.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of all the messages header field names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.tree_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tree_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Write the structure of this message to stdout. This is handled recursively.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">tree_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write the structure of this message to stdout. This is handled recursively.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="n">level</span><span class="si">}{</span><span class="n">message</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">is_multipart</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">sub_part</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">get_payload</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree_view</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">sub_part</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="mailie._email.Email.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h2>

    <div class="doc doc-contents ">

      <p>Return a list of all the messages header values.</p>

        <details class="quote">
          <summary>Source code in <code>mailie/_email.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">EMAIL_HEADER_TYPE_ALIAS</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of all the messages header values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate_message</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
          </div>
        </a>
      
      
        
        <a href="../dsl/" class="md-footer__link md-footer__link--next" aria-label="Next: DSL" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              DSL
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.361d90f1.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.289a2a4b.min.js"></script>
      
    
  </body>
</html>